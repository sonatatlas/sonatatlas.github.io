---
layout: post
title: yum repo
categories: linux
---

# reinsall base-repo:



+ sudo rm -rf `/etc/yum.repos.d/`
+ download mirror

alibaba mirror:  

```
# CentOS 5
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-5.repo
# CentOS 6
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo
# CentOS 7
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
```  
offical mirror:  

```
rpm -Uvh --force http://mirror.centos.org/centos-7/7/os/x86_64/Packages/centos-release-7-4.1708.el7.centos.x86_64.rpm
```  

+ remake chache

```
yum clean all
yum makecache
```



# Common yum repo  

yum repo server:  

+ http://
+ https://
+ ftp://
+ file:// 

yum domestic repo:  

+ alibaba: https://mirrors.aliyun.com/centos/7.3.1611/os/x86_64/
+ tsinghua: https://mirror.tuna.tsinghua.edu.cn/centos/7.3.1611/os/x86_64/
+ netease: http://mirrors.163.com/centos/7.3.1611/os/x86_64/
+ zju: http://mirrors.zju.edu.cn/centos/7.3.1611/os/x86_64/  

# yum config  

+ config file:  

```
cachedir=/var/cache/yum/$basearch/$releasever # yum dir
keepcache=0    # 1 for cache, 0 for none
debuglevel=2
logfile=/var/log/yum.log  # yum log
exactarch=1
obsoletes=1
gpgcheck=1  # gpd check
plugins=1
installonly_limit=5
bugtracker_url=http://bugs.centos.org/set_project.php?project_id=23&ref=http://bugs.centos.org/bug_report_page.php?category=yum
distroverpkg=centos-release
```
 
+ config start-up:  

```
# PUT YOUR REPOS HERE OR IN separate files named file.repo
# in /etc/yum.repos.d
```  

+ change suffix:  

```
mv /etc/yum.conf.d/CentOS-Base.repo /etc/yum.conf.d/CentOS-Base.repo.bak
```

+ new repo, named CentOS7.repo:

```
[CentOS7-base]   #源名称，必填
name=CentOS-$releasever-base  #源描述，可以不填，但是会有提示
baseurl=file:///misc/cd/      #本地的光盘文件，可以有多个地址。必填
        https://mirrors.aliyun.com/centos/7.3.1611/os/x86_64/
gpgcheck=1                    #是否开启校验，在yum.conf中已经定义它默认值为1
enabled=1                     #是否禁用此yum源,默认为
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
#如果开启yum源包校验，则需要导入RPM公钥，此处只是在系统没有导入rpm公钥时候进行安装
#这里相当于rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

[aliyun_epel]   #这是Redhat的扩展包
name=ailiyun_yum_epel
baseurl=https://mirrors.aliyun.com/epel/$releasever/x86_64
gpgkey=https://mirrors.aliyun.com/epel/RPM-GPG-KEY-EPEL-7
gpgcheck=1
```


# yum command

params:  
+ --nogpgcheck
+ -y // for yes
+ -q // quiet
+ --disablerepo=repoidglob: temporarily disable repo
+ --enablerepo=repoidglob: temporarily enable repo
+ --noplugins: 

repo list:  
+ yum repolist [all | enabled | disabled]: 
+ yum grouplist:
+ yum list {available | installed | updates} 
  + yum list vsftpd*
  
install && remove:  
+ yum install package
+ yum restall package
+ yum update package
+ yum check-update
+ yum remove package1 [package2]

yum search:  

+ yum info
+ yum provides feature1
+ yum search xxx: 

yum cached:  
+ yum makecache
+ yum clean all

yum history:  

+ yum history
+ yum history info 6
+ yum history undo 6
+ yum history redo 6



